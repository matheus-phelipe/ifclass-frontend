<!-- Cadastro Container Moderno e Responsivo -->
<div class="register-container">
  <!-- Background Animado -->
  <div class="animated-background">
    <div class="floating-shape shape-1"></div>
    <div class="floating-shape shape-2"></div>
    <div class="floating-shape shape-3"></div>
    <div class="floating-shape shape-4"></div>
  </div>

  <!-- Card Principal -->
  <div class="register-card">
    <!-- Header com Logo -->
    <div class="register-header">
      <div class="logo-container">
        <img src="assets/ifclass.png" alt="Logo IF" class="logo-if">
        <img src="assets/Class.png" alt="Logo Class" class="logo-class">
      </div>
      <h1 class="welcome-title">Crie sua conta!</h1>
      <p class="welcome-subtitle">Preencha os dados para começar</p>
    </div>

    <!-- Formulário -->
    <form #formCadastro="ngForm" (ngSubmit)="cadastrar()" novalidate class="register-form">
      <!-- Campos Dinâmicos -->
      <div class="form-group" *ngFor="let campo of campos; trackBy: trackByCampo">
        <label [for]="campo.nome" class="form-label">
          <i class="bi" [ngClass]="campo.icone"></i>
          {{ campo.label }}
        </label>

        <div class="input-wrapper" [class.error]="isInvalidField(model)">
          <input
            [(ngModel)]="usuario[campo.nome]"
            [name]="campo.nome"
            #model="ngModel"
            [id]="campo.nome"
            class="form-input"
            [placeholder]="campo.placeholder"
            [type]="getInputType(campo)"
            [required]="true"
            [minlength]="(campo.nome === 'senha' || campo.nome === 'confirmarSenha') ? 6 : null"
            [pattern]="campo.nome === 'email' ? '^[a-zA-Z0-9._%+\\-]+@[a-zA-Z0-9.\\-]+\\.[a-zA-Z]{2,}$' : ''"
            [autocomplete]="getAutocomplete(campo.nome)"
          >

          <div class="input-icon">
            <i class="bi" [ngClass]="getFieldIcon(campo)"></i>
          </div>

          <!-- Toggle de Senha -->
          <button
            type="button"
            class="password-toggle"
            *ngIf="campo.nome === 'senha' || campo.nome === 'confirmarSenha'"
            (click)="toggleMostrarSenha(campo.nome)"
            [attr.aria-label]="mostrarSenha[campo.nome] ? 'Ocultar senha' : 'Mostrar senha'"
          >
            <i class="bi" [ngClass]="mostrarSenha[campo.nome] ? 'bi-eye-slash' : 'bi-eye'"></i>
          </button>
        </div>

        <!-- Mensagens de Erro -->
        <div class="error-message" *ngIf="isInvalidField(model)">
          <i class="bi bi-exclamation-circle"></i>
          <span *ngIf="model.errors?.['required']">{{ campo.label }} é obrigatório</span>
          <span *ngIf="model.errors?.['pattern']">Formato de email inválido</span>
          <span *ngIf="model.errors?.['minlength']">Mínimo de 6 caracteres</span>
        </div>
      </div>

      <!-- Validação de Senhas -->
      <div class="password-match-info" *ngIf="usuario.senha && usuario.confirmarSenha">
        <div class="match-indicator" [class.match]="senhasConferem()" [class.no-match]="!senhasConferem()">
          <i class="bi" [ngClass]="senhasConferem() ? 'bi-check-circle-fill' : 'bi-x-circle-fill'"></i>
          <span>{{ senhasConferem() ? 'Senhas conferem' : 'Senhas não conferem' }}</span>
        </div>
      </div>

      <!-- Botão Cadastrar -->
      <button
        type="submit"
        class="register-button"
        [disabled]="formCadastro.invalid || !senhasConferem()"
        [class.loading]="false"
      >
        <span class="button-text">Criar Conta</span>
        <i class="bi bi-person-plus button-icon"></i>
      </button>

      <!-- Divider -->
      <div class="divider">
        <span>ou</span>
      </div>

      <!-- Botão Login -->
      <a routerLink="/login" class="login-button">
        <i class="bi bi-box-arrow-in-right"></i>
        Já tenho uma conta
      </a>
    </form>
  </div>

  <!-- Footer -->
  <div class="register-footer">
    <p>&copy; 2024 IFClass. Sistema de Gestão Acadêmica</p>
  </div>
</div>

<app-modal
  #meuModal
  id="meuModal"
  title="Alerta"
  [message]="mensagemDoModal">
</app-modal>